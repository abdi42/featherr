{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["/**\n * Created by hsuanlee on 2017/4/4.\n */\nimport { NgModule} from '@angular/core';\nimport { HomePage} from './home';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatService } from \"../../providers/chat-service\";\n\n@NgModule({\n    declarations: [HomePage],\n    imports: [\n        IonicPageModule.forChild(HomePage),\n\n    ],\n    providers: [\n        ChatService,\n    ]\n})\nexport class HomePageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { IonicPage,NavController,ModalController,Loading,LoadingController,AlertController } from 'ionic-angular';\nimport { ChatService, UserInfo } from \"../../providers/chat-service\";\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { GroupsProvider } from '../../providers/groups/groups';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  user: UserInfo;\n  groupsList: any[] = [];\n  loading: Loading;\n  buttonClicked: any = false;\n  \n  constructor(\n    public navCtrl: NavController,\n    private db: AngularFireDatabase,\n    private chatService: ChatService,\n    public groups: GroupsProvider,\n    public modalCtrl: ModalController,\n    public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController) {\n\n  }\n\n  ionViewDidLoad() {\n    //get message list\n    this.chatService.getUserInfo()\n    .then((res) => {\n      this.user = res\n    });\n    this.buttonClicked = false;\n  }\n\n  ionViewDidEnter() {\n    //get message list\n    this.chatService.getUserInfo()\n    .then((res) => {\n      this.user = res\n      this.getGroups();\n    });\n  }\n\n  getGroups(){\n    this.groupsList = []\n    if(this.user.groups){\n      for(var i=0;i<this.user.groups.length;i++){\n        var currentGroup = this.user.groups[i]\n        if(currentGroup.leftGroup == false){\n          this.groups.getGroup(currentGroup.groupId).then((group) => {\n            console.log(group.groupId,'eweeeeee')\n            this.groupsList.push(group)\n          })\n        }\n      }\n    }\n  }\n\n  goToChat(group){\n    this.loading = this.loadingCtrl.create({\n      dismissOnPageChange:true\n    });\n\n    this.loading.dismiss().then( () => {\n      this.navCtrl.push('Chat',group)\n    });\n\n    this.loading.present();\n  }\n\n  joinGroup(){\n    this.buttonClicked = true\n    if(this.user.groupCount < 3 || this.user.groupCount == 3){\n      this.groups.addToGroup(this.user.name,this.user.uid,this.user.groups).then((groupId) => {\n        let modal = this.modalCtrl.create('UsersListPage',{group: groupId});\n        modal.present();\n      })\n    }\n    else {\n      let alert = this.alertCtrl.create({\n        subTitle: 'I\\'m sorry but you can join only 3 groups at a time. If you want to join another group. Head over to one of the group chats and click leave.',        buttons: ['Dismiss']\n      });\n      \n      alert.present();\n    }\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}